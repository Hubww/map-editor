(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-804ffc60"],{"6d03":function(t,n,e){"use strict";e.r(n);var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",{staticClass:"m pathList"},t._l(t.roads,function(n,r){return e("el-tag",{key:"road"+r,staticClass:"_pathtag",attrs:{type:r===t.$root.currentEditingPathIndex?"success":"info"},nativeOn:{click:function(n){t.choosePath(r)}}},[t._v("路径"+t._s(r+1))])})),e("el-table",{ref:"currentRoadsPointsTable",staticStyle:{width:"100%"},attrs:{"empty-text":"在左侧地图上开始绘制",height:t.winHeight-360,data:t.currentPath,"highlight-current-row":!0},on:{"current-change":t.triggerCurrentFromTable}},[e("el-table-column",{attrs:{type:"index",width:"50"}}),e("el-table-column",{attrs:{label:"坐标",width:"150"},scopedSlots:t._u([{key:"default",fn:function(n){return[t._v("\n        X: "+t._s(n.row.x)+" Y: "+t._s(n.row.y)+"\n      ")]}}])}),e("el-table-column",{attrs:{label:"关联建筑"},scopedSlots:t._u([{key:"default",fn:function(n){return[n.row.connectBuildings?e("div",[t._v("\n          "+t._s(n.row.connectBuildings.join("、"))+"\n        ")]):t._e()]}}])}),e("el-table-column",{attrs:{label:"操作",width:"280",align:"center"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.insertPoint(n.$index,-1)}}},[t._v("前添加")]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.insertPoint(n.$index,1)}}},[t._v("后添加")]),e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){t.deleteCurrentPathPoint(n.$index)}}},[t._v("删除")])]}}])})],1),e("div",{staticClass:"tc m"},[e("el-button",{attrs:{type:"primary",disabled:!t.currentPath||!t.currentPath.length},on:{click:t.addPath}},[t._v("保存路径")]),e("el-button",{attrs:{disabled:!t.currentPath||!t.currentPath.length},on:{click:t.clearPath}},[t._v("清除节点")]),e("el-button",{attrs:{type:"danger",disabled:!t.$root.currentEditingPathIndex},on:{click:function(n){t.deletePath(t.$root.currentEditingPathIndex)}}},[t._v("删除路径")])],1)],1)},i=[],a=(e("3a0f"),e("a3a3"),e("4d0b"),e("3da7")),o={props:{roads:{type:Array},roadsCurrentShow:{default:void 0}},data:function(){return{winHeight:null}},watch:{roadsCurrentShow:function(t){this.$refs.currentRoadsPointsTable.setCurrentRow(t)}},computed:{currentPath:function(){if(Array.isArray(this.roads))return this.roads[this.$root.currentEditingPathIndex]}},methods:{triggerCurrentFromTable:function(t,n){t&&(t.active=!0),n&&delete n.active,this.$emit("update")},insertPoint:function(t,n){var e,r,i,a=this.currentPath[t];if(n<0){if(t>0)e=this.currentPath[t-1];else{var o=this.currentPath[t+1],s={x:a.x-o.x,y:a.y-o.y};e={x:a.x+s.x,y:a.y+s.y}}i=t}else{if(t===this.currentPath.length-1){var c=this.currentPath[t-1],u={x:a.x-c.x,y:a.y-c.y};e={x:a.x+u.x,y:a.y+u.y}}else e=this.currentPath[t+1];i=t+1}r={x:parseInt((a.x+e.x)/2),y:parseInt((a.y+e.y)/2)},this.roads[this.$root.currentEditingPathIndex].splice(i,0,r)},deleteCurrentPathPoint:function(t){this.roads[this.$root.currentEditingPathIndex].splice(t,1)},addPath:function(){this.$root.currentEditingPathIndex?this.roads.splice(this.$root.currentEditingPathIndex,1,a["a"](this.currentPath)):this.roads.push(a["a"](this.currentPath)),this.$root.currentEditingPathIndex=null,this.savePath()},clearPath:function(){this.$set(this.roads,this.$root.currentEditingPathIndex,[])},deletePath:function(t){var n=this;this.$confirm("删除路径"+(t+1)+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.$root.currentEditingPathIndex=null,n.roads.splice(t,1),n.savePath()})},unchoosePath:function(){this.$root.currentEditingPathIndex=null},choosePath:function(t){if(this.$root.currentEditingPathIndex===t)return this.unchoosePath();this.$root.currentEditingPathIndex=t},savePath:function(){this.$emit("savePath")}},mounted:function(){this.winHeight=window.innerHeight}},s=o,c=(e("d1f9"),e("048f")),u=Object(c["a"])(s,r,i,!1,null,"1d7fe5d4",null);u.options.__file="roadsediter.vue";n["default"]=u.exports},"9cbb":function(t,n,e){},d1f9:function(t,n,e){"use strict";var r=e("9cbb"),i=e.n(r);i.a}}]);
//# sourceMappingURL=chunk-804ffc60.96cefe8d.js.map